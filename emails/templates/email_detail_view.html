{% extends 'global/base.html' %}
{% load humanize %}
{% block basetitle %}
<title>View Email ID: {{ email.pk }}</title>
{% endblock %}
{% block content %}
<div class="container">
  <div class="card-header">
    <h2> {{ email.subject }} </h2>
    <div class="col text-right h2">
      <a class="button" href="">
        <button class="btn btn-primary ml-auto">Edit</button>
      </a>
    </div>
  </div>

  <div class="card">
    <div class="card-header">
      <h2 class="col card-title">Status: &nbsp;
        {% if email.status == "draft" %}
        <span class="status-icon bg-gray-dark"></span> Draft
        {% elif email.status == 'scheduled' %}
        <span class="status-icon bg-pink"></span> Scheduled
        {% elif email.status == 'sent' %}
        <span class="status-icon bg-green"></span> Sent
        {% endif %}
      </h2>
    </div>
  </div>

  <div class="row row-cards">
    <div class="col-sm-4">
      <div class="card">
        <div class="card-header">
          <h2 class="card-title">Email Information</h2>
        </div>
        <div class="card-body">
          <p class="required-field">
            <label><b>Email Compose Template:</b></label>
            {% if email.to_contacts %}
            1
            {% elif email.to_companies %}
            2
            {% else %}
            3
            {% endif %}
          </p>
          {% if email.to_industries %}
          <p class="required-field">
            <label><b>Selected Industries: </b></label>
            {% for industry in email.to_industries.all %}
            <span class="tag tag-{{industry.color}}">{{ industry.name }}</span>
            {% endfor %}
          </p>
          <p class="required-field">
            <label><b>Company Sizes: </b></label>
            {% for size in email.size_selection %}
            {% if size == 'S' %}
            <span class="tag tag-blue">{{ size }}</span>
            {% elif size == 'M' %}
            <span class="tag tag-orange">{{ size }}</span>
            {% elif size == 'L' %}
            <span class="tag tag-pink">{{ size }}</span>
            {% endif %}
            {% endfor %}
          </p>
          {% endif %}
          {% if email.contacted_selection %}
          <p class="required-field">
            <label><b>Contacts who are: </b></label>
            {% for contacted in email.contacted_selection %}
            
            <span class="tag tag-red">{{ contacted }}</span>
            {% endfor %}
          </p>
          {% endif %}
          <p class="text-right">
            Last Updated: {{ email.last_update }}
          </p>
        </div>
      </div>
    </div>
    <div class="col-sm-8">
      <div class="card flex-grow-1">
        <div class="card-header">
          <h2 class="card-title">Email Body</h2>
        </div>
        <div class="card-body">
          {{ email.body | safe }}
        </div>
      </div>
    </div>
  </div>

</div>
{% endblock %}